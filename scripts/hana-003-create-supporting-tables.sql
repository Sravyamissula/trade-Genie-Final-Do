-- Create Tariff Information Table
CREATE TABLE TARIFF_INFORMATION (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_NAME NVARCHAR(200) NOT NULL,
    HS_CODE NVARCHAR(20) NOT NULL,
    ORIGIN_COUNTRY NVARCHAR(100) NOT NULL,
    DESTINATION_COUNTRY NVARCHAR(100) NOT NULL,
    TARIFF_RATE NVARCHAR(20) NOT NULL,
    ADDITIONAL_DUTIES NVARCHAR(20),
    TOTAL_TARIFF_RATE NVARCHAR(20) NOT NULL,
    NOTES NCLOB,
    LAST_UPDATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample tariff data
INSERT INTO TARIFF_INFORMATION (PRODUCT_NAME, HS_CODE, ORIGIN_COUNTRY, DESTINATION_COUNTRY, TARIFF_RATE, ADDITIONAL_DUTIES, TOTAL_TARIFF_RATE, NOTES) VALUES
('Black Tea', '0902.10', 'India', 'United States', '6.4%', '0%', '6.4%', 'Standard import duty for tea products'),
('Green Tea', '0902.20', 'India', 'United States', '6.4%', '0%', '6.4%', 'Standard import duty for tea products'),
('Nylon Fabric', '5407.61', 'India', 'United States', '8.1%', '0%', '8.1%', 'Textile import duty'),
('Cotton Fabric', '5208.11', 'India', 'United States', '7.3%', '0%', '7.3%', 'Cotton textile import duty'),
('Smartphone', '8517.12', 'India', 'United States', '0%', '0%', '0%', 'Free trade under GSP'),
('Laptop Computer', '8471.30', 'India', 'United States', '0%', '0%', '0%', 'Information Technology Agreement'),
('Basmati Rice', '1006.20', 'India', 'Germany', '0%', '0%', '0%', 'EU preferential rate'),
('Steel Pipes', '7306.30', 'India', 'Germany', '0%', '0%', '0%', 'EU-India trade agreement'),
('Automotive Parts', '8708.99', 'India', 'Germany', '4.5%', '0%', '4.5%', 'Standard automotive component duty'),
('Pharmaceutical Products', '3004.90', 'India', 'United Kingdom', '0%', '0%', '0%', 'Essential medicines exemption');

-- Create Currency Rates Table
CREATE TABLE CURRENCY_RATES (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    BASE_CURRENCY NVARCHAR(3) NOT NULL,
    TARGET_CURRENCY NVARCHAR(3) NOT NULL,
    EXCHANGE_RATE DECIMAL(10,4) NOT NULL,
    VOLATILITY_SCORE DECIMAL(3,1) NOT NULL,
    LAST_UPDATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample currency data
INSERT INTO CURRENCY_RATES (BASE_CURRENCY, TARGET_CURRENCY, EXCHANGE_RATE, VOLATILITY_SCORE) VALUES
('USD', 'INR', 83.2500, 2.8),
('EUR', 'INR', 89.7500, 3.2),
('GBP', 'INR', 105.2500, 3.8),
('JPY', 'INR', 0.5580, 2.5),
('CNY', 'INR', 11.4500, 4.1),
('BRL', 'INR', 16.8500, 5.2);

-- Create Economic Indicators Table
CREATE TABLE ECONOMIC_INDICATORS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    COUNTRY NVARCHAR(100) NOT NULL,
    GDP_GROWTH_RATE DECIMAL(4,2) NOT NULL,
    INFLATION_RATE DECIMAL(4,2) NOT NULL,
    UNEMPLOYMENT_RATE DECIMAL(4,2) NOT NULL,
    TRADE_BALANCE BIGINT NOT NULL,
    LAST_UPDATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample economic data
INSERT INTO ECONOMIC_INDICATORS (COUNTRY, GDP_GROWTH_RATE, INFLATION_RATE, UNEMPLOYMENT_RATE, TRADE_BALANCE) VALUES
('United States', 2.1, 3.2, 3.7, -948000000000),
('Germany', 0.8, 2.9, 3.0, 298000000000),
('China', 5.2, 2.1, 5.2, 677000000000),
('Japan', 1.2, 1.8, 2.6, 29000000000),
('Brazil', 2.9, 4.6, 8.8, -29000000000),
('United Kingdom', 1.5, 4.2, 4.2, -195000000000);

-- Create Regulatory Updates Table
CREATE TABLE REGULATORY_UPDATES (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    COUNTRY NVARCHAR(100) NOT NULL,
    REGULATION_TYPE NVARCHAR(100) NOT NULL,
    TITLE NVARCHAR(500) NOT NULL,
    DESCRIPTION NCLOB NOT NULL,
    EFFECTIVE_DATE DATE NOT NULL,
    IMPACT_LEVEL NVARCHAR(20) NOT NULL,
    AFFECTED_PRODUCTS NVARCHAR(500),
    LAST_UPDATED TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample regulatory updates
INSERT INTO REGULATORY_UPDATES (COUNTRY, REGULATION_TYPE, TITLE, DESCRIPTION, EFFECTIVE_DATE, IMPACT_LEVEL, AFFECTED_PRODUCTS) VALUES
('United States', 'Trade Policy', 'Updated Section 301 Tariffs', 'Revised tariff rates on specific Chinese imports', '2024-01-15', 'High', 'Electronics, Machinery'),
('European Union', 'Environmental', 'Carbon Border Adjustment Mechanism', 'New carbon tariffs on imports from high-emission countries', '2024-10-01', 'High', 'Steel, Cement, Aluminum'),
('United Kingdom', 'Brexit Implementation', 'Rules of Origin Updates', 'Clarifications on post-Brexit rules of origin requirements', '2024-03-01', 'Medium', 'Automotive, Textiles'),
('Germany', 'Supply Chain', 'Supply Chain Due Diligence Act', 'Mandatory human rights and environmental due diligence', '2024-01-01', 'Medium', 'All Products'),
('Japan', 'Digital Trade', 'Digital Services Tax', 'New tax on digital services provided by foreign companies', '2024-04-01', 'Low', 'Digital Services'),
('Brazil', 'Import Licensing', 'Simplified Import Process', 'Streamlined import licensing for specific product categories', '2024-02-01', 'Medium', 'Electronics, Textiles');

-- Create indexes for all supporting tables
CREATE INDEX IDX_TARIFF_PRODUCT ON TARIFF_INFORMATION(PRODUCT_NAME);
CREATE INDEX IDX_TARIFF_DESTINATION ON TARIFF_INFORMATION(DESTINATION_COUNTRY);
CREATE INDEX IDX_TARIFF_HS_CODE ON TARIFF_INFORMATION(HS_CODE);

CREATE INDEX IDX_CURRENCY_BASE ON CURRENCY_RATES(BASE_CURRENCY);
CREATE INDEX IDX_CURRENCY_TARGET ON CURRENCY_RATES(TARGET_CURRENCY);

CREATE INDEX IDX_ECONOMIC_COUNTRY ON ECONOMIC_INDICATORS(COUNTRY);

CREATE INDEX IDX_REGULATORY_COUNTRY ON REGULATORY_UPDATES(COUNTRY);
CREATE INDEX IDX_REGULATORY_TYPE ON REGULATORY_UPDATES(REGULATION_TYPE);
CREATE INDEX IDX_REGULATORY_DATE ON REGULATORY_UPDATES(EFFECTIVE_DATE);
